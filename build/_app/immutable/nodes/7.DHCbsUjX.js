import{f as n,a as l,c as ht}from"../chunks/Cmu9DQIa.js";import{p as Zt,b as et,A as ta,o as aa,s as p,c as e,d as i,t as y,a as ea,g as t,r as a,f as N,u as wt}from"../chunks/CziYcT8N.js";import{d as ra,s as v}from"../chunks/D7KH9V-l.js";import{e as ia,i as sa}from"../chunks/CIG3C_FR.js";import{i as A}from"../chunks/CAhqGc99.js";import{s as b}from"../chunks/CeFxQ_S_.js";import{a as kt}from"../chunks/CecYYC_m.js";var va=n('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),da=n('<div class="card p-12 text-center"><svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path></svg> <h3 class="text-lg font-medium text-gray-900 mb-2">No users found</h3> <p class="text-gray-600">Try adjusting your filters</p></div>'),la=n("<span> </span>"),oa=n('<div class="text-gray-500"> </div>'),na=n("<div> </div> <!>",1),ca=n('<div class="text-gray-500"> </div>'),xa=n("<div> </div> <!>",1),ga=n('<div class="text-gray-500">-</div>'),pa=n('<tr class="hover:bg-gray-50 transition-colors"><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><div class="flex-shrink-0 h-10 w-10"><div class="h-10 w-10 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white font-semibold"> </div></div> <div class="ml-4"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div></div></div></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4"><div class="text-sm text-gray-900"><!></div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-primary-600 hover:text-primary-900 mr-3"> </button></td></tr>'),_a=n('<div class="card overflow-hidden"><div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Details</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div> <div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class="text-sm text-gray-600">Total Users</div> <div class="text-2xl font-bold text-gray-800 mt-1"> </div></div> <div class="card p-4"><div class="text-sm text-gray-600">Active Users</div> <div class="text-2xl font-bold text-green-600 mt-1"> </div></div> <div class="card p-4"><div class="text-sm text-gray-600">Inactive Users</div> <div class="text-2xl font-bold text-red-600 mt-1"> </div></div> <div class="card p-4"><div class="text-sm text-gray-600">Students</div> <div class="text-2xl font-bold text-blue-600 mt-1"> </div></div></div>',1),ma=n('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-800">User Management</h1> <p class="text-gray-600 mt-1">Manage users and their access to the system</p></div> <div class="card p-4"><div class="flex flex-wrap gap-2"><button> </button> <button> </button> <button> </button> <button> </button> <button> </button> <button> </button></div></div> <!></div>');function Aa(At,Mt){Zt(Mt,!0);let o=et(ta([])),C=et(!0),d=et("all");aa(async()=>{await rt()});async function rt(){p(C,!0);try{const r=await kt.getUsers();r.status==="success"&&p(o,r.data||[],!0)}catch(r){console.error("Failed to load users:",r)}finally{p(C,!1)}}async function Ut(r){try{await kt.toggleUserStatus(r),await rt()}catch(x){console.error("Failed to toggle user status:",x),alert("Failed to update user status")}}let it=wt(()=>t(o).filter(r=>t(d)==="all"?!0:t(d)==="active"?r.is_active:t(d)==="inactive"?!r.is_active:r.role?.name===t(d)));function Dt(r){return{Admin:{class:"bg-indigo-100 text-indigo-700",text:"Admin"},"Dosen Wali":{class:"bg-purple-100 text-purple-700",text:"Dosen Wali"},Mahasiswa:{class:"bg-blue-100 text-blue-700",text:"Mahasiswa"}}[r]||{class:"bg-gray-100 text-gray-700",text:r}}var F=ma(),z=i(e(F),2),st=e(z),M=e(st);M.__click=()=>p(d,"all");var $t=e(M);a(M);var U=i(M,2);U.__click=()=>p(d,"Mahasiswa");var jt=e(U);a(U);var D=i(U,2);D.__click=()=>p(d,"Dosen Wali");var Wt=e(D);a(D);var $=i(D,2);$.__click=()=>p(d,"Admin");var It=e($);a($);var j=i($,2);j.__click=()=>p(d,"active");var Nt=e(j);a(j);var S=i(j,2);S.__click=()=>p(d,"inactive");var St=e(S);a(S),a(st),a(z);var Bt=i(z,2);{var Ct=r=>{var x=va();l(r,x)},Ft=r=>{var x=ht(),R=N(x);{var T=k=>{var B=da();l(k,B)},H=k=>{var B=_a(),P=N(B),vt=e(P),dt=e(vt),lt=i(e(dt));ia(lt,21,()=>t(it),sa,(g,s)=>{var W=pa(),J=e(W),_t=e(J),K=e(_t),mt=e(K),Pt=e(mt,!0);a(mt),a(K);var ut=i(K,2),L=e(ut),qt=e(L,!0);a(L);var ft=i(L,2),Et=e(ft,!0);a(ft),a(ut),a(_t),a(J);var O=i(J);{const c=h=>{const _=wt(()=>Dt(t(s).role?.name||"Unknown"));var m=la(),I=e(m,!0);a(m),y(()=>{b(m,1,`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t(_).class??""}`),v(I,t(_).text)}),l(h,m)};var Gt=e(O);c(Gt),a(O)}var Q=i(O),yt=e(Q),Jt=e(yt);{var Kt=c=>{var h=na(),_=N(h),m=e(_);a(_);var I=i(_,2);{var u=f=>{var w=oa(),Z=e(w);a(w),y(()=>v(Z,`Major: ${t(s).student.major??""}`)),l(f,w)};A(I,f=>{t(s).student.major&&f(u)})}y(()=>v(m,`NIM: ${(t(s).student.nim||"N/A")??""}`)),l(c,h)},Lt=c=>{var h=ht(),_=N(h);{var m=u=>{var f=xa(),w=N(f),Z=e(w);a(w);var Vt=i(w,2);{var Xt=tt=>{var at=ca(),Yt=e(at);a(at),y(()=>v(Yt,`Dept: ${t(s).lecturer.department??""}`)),l(tt,at)};A(Vt,tt=>{t(s).lecturer.department&&tt(Xt)})}y(()=>v(Z,`NIP: ${(t(s).lecturer.nip||"N/A")??""}`)),l(u,f)},I=u=>{var f=ga();l(u,f)};A(_,u=>{t(s).role?.name==="Dosen Wali"&&t(s).lecturer?u(m):u(I,!1)},!0)}l(c,h)};A(Jt,c=>{t(s).role?.name==="Mahasiswa"&&t(s).student?c(Kt):c(Lt,!1)})}a(yt),a(Q);var V=i(Q),X=e(V),Ot=e(X,!0);a(X),a(V);var bt=i(V),Y=e(bt);Y.__click=()=>Ut(t(s).id);var Qt=e(Y,!0);a(Y),a(bt),a(W),y(c=>{v(Pt,c),v(qt,t(s).full_name||"N/A"),v(Et,t(s).email||t(s).username),b(X,1,`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t(s).is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),v(Ot,t(s).is_active?"Active":"Inactive"),v(Qt,t(s).is_active?"Deactivate":"Activate")},[()=>t(s).full_name?.charAt(0).toUpperCase()||t(s).username?.charAt(0).toUpperCase()||"U"]),l(g,W)}),a(lt),a(dt),a(vt),a(P);var ot=i(P,2),q=e(ot),nt=i(e(q),2),zt=e(nt,!0);a(nt),a(q);var E=i(q,2),ct=i(e(E),2),Rt=e(ct,!0);a(ct),a(E);var G=i(E,2),xt=i(e(G),2),Tt=e(xt,!0);a(xt),a(G);var gt=i(G,2),pt=i(e(gt),2),Ht=e(pt,!0);a(pt),a(gt),a(ot),y((g,s,W)=>{v(zt,t(o).length),v(Rt,g),v(Tt,s),v(Ht,W)},[()=>t(o).filter(g=>g.is_active).length,()=>t(o).filter(g=>!g.is_active).length,()=>t(o).filter(g=>g.role?.name==="Mahasiswa").length]),l(k,B)};A(R,k=>{t(it).length===0?k(T):k(H,!1)},!0)}l(r,x)};A(Bt,r=>{t(C)?r(Ct):r(Ft,!1)})}a(F),y((r,x,R,T,H)=>{b(M,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="all"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v($t,`All Users (${t(o).length??""})`),b(U,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="Mahasiswa"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v(jt,`Mahasiswa (${r??""})`),b(D,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="Dosen Wali"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v(Wt,`Dosen Wali (${x??""})`),b($,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="Admin"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v(It,`Admin (${R??""})`),b(j,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="active"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v(Nt,`Active (${T??""})`),b(S,1,`px-4 py-2 rounded-lg transition-colors ${t(d)==="inactive"?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`),v(St,`Inactive (${H??""})`)},[()=>t(o).filter(r=>r.role?.name==="Mahasiswa").length,()=>t(o).filter(r=>r.role?.name==="Dosen Wali").length,()=>t(o).filter(r=>r.role?.name==="Admin").length,()=>t(o).filter(r=>r.is_active).length,()=>t(o).filter(r=>!r.is_active).length]),l(At,F),ea()}ra(["click"]);export{Aa as component};
