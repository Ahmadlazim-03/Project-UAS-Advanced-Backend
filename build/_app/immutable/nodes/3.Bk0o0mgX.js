import{f as p,a as u,c as Bt}from"../chunks/Cmu9DQIa.js";import{p as Tt,b as E,A as xt,o as Ht,f as rt,a as Gt,s as v,c as r,d as e,g as t,u as it,r as a,al as It,t as ot}from"../chunks/CziYcT8N.js";import{d as Ut,s as m,e as Yt}from"../chunks/D7KH9V-l.js";import{e as Jt,i as Kt}from"../chunks/CIG3C_FR.js";import{i as y}from"../chunks/CAhqGc99.js";import{r as Q}from"../chunks/ktb937c3.js";import{s as Qt}from"../chunks/CeFxQ_S_.js";import{b as L}from"../chunks/Do9sIj_i.js";import{b as Wt}from"../chunks/BvI8bicD.js";import{s as Xt,a as Zt}from"../chunks/BmnBliu1.js";import{a as W}from"../chunks/CecYYC_m.js";import{a as te}from"../chunks/CcZuglA2.js";var ee=p('<button class="btn btn-primary"><svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path></svg> Add Achievement</button>'),ae=p('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),re=p('<button class="btn btn-primary">Add Your First Achievement</button>'),ie=p('<div class="card p-12 text-center"><svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <h3 class="text-lg font-medium text-gray-900 mb-2">No achievements yet</h3> <p class="text-gray-600 mb-4">Get started by adding your first achievement</p> <!></div>'),oe=p('<div class="mt-2 text-sm"><span class="text-gray-500">Certificate:</span> <span class="font-medium text-gray-800 ml-1"> </span></div>'),se=p('<div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-lg"><p class="text-sm text-red-800"><strong>Rejection Reason:</strong> </p></div>'),ne=p('<button class="btn btn-primary btn-sm">Submit for Verification</button> <button class="btn btn-secondary btn-sm">Edit</button> <button class="btn btn-danger btn-sm">Delete</button>',1),le=p('<button class="btn btn-secondary btn-sm">Edit</button> <button class="btn btn-danger btn-sm">Delete</button>',1),de=p('<div class="card p-6 hover:shadow-lg transition-shadow"><div class="flex justify-between items-start mb-4"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><h3 class="text-xl font-semibold text-gray-800"> </h3> <span> </span></div> <p class="text-gray-600 mb-3"> </p> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"><div><span class="text-gray-500">Category:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Points:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Date:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Organizer:</span> <span class="font-medium text-gray-800 ml-1"> </span></div></div> <!> <!></div></div> <div class="flex gap-2 flex-wrap"><!> <!></div></div>'),ve=p('<div class="grid grid-cols-1 gap-6"></div>'),ce=p('<div class="modal-overlay svelte-41jfu9"><div class="modal-content svelte-41jfu9"><div class="modal-header svelte-41jfu9"><h2 class="text-2xl font-bold text-gray-800"> </h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <form><div class="modal-body svelte-41jfu9"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="md:col-span-2"><label class="form-label">Title</label> <input type="text" class="form-input" placeholder="Achievement title" required/></div> <div class="md:col-span-2"><label class="form-label">Description</label> <textarea class="form-input" rows="3" placeholder="Describe your achievement" required></textarea></div> <div><label class="form-label">Category</label> <select class="form-input" required><option>Select category</option><option>Competition</option><option>Research</option><option>Publication</option><option>Community Service</option><option>Organization</option><option>Certification</option><option>Other</option></select></div> <div><label class="form-label">Points</label> <input type="number" class="form-input" placeholder="0" min="0" required/></div> <div><label class="form-label">Achievement Date</label> <input type="date" class="form-input" required/></div> <div><label class="form-label">Certificate Number</label> <input type="text" class="form-input" placeholder="Certificate number (optional)"/></div> <div class="md:col-span-2"><label class="form-label">Organizer</label> <input type="text" class="form-input" placeholder="Organization or institution" required/></div></div></div> <div class="modal-footer svelte-41jfu9"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn btn-primary"> </button></div></form></div></div>'),ue=p('<div class="space-y-6"><div class="flex justify-between items-center"><div><h1 class="text-3xl font-bold text-gray-800">Achievements</h1> <p class="text-gray-600 mt-1">Manage your achievements and track your progress</p></div> <!></div> <!></div> <!>',1);function ke(ht,wt){Tt(wt,!0);const At=()=>Zt(te,"$authStore",jt),[jt,kt]=Xt();let st=E(xt([])),nt=E(!0),w=E(!1),P=E(!1),lt=E(null),l=E(xt({title:"",description:"",category:"",points:0,achievement_date:"",certificate_number:"",organizer:""})),pt=it(()=>At().user),zt=it(()=>t(pt)?.role.name==="Admin"),dt=it(()=>t(pt)?.role.name==="Mahasiswa");Ht(async()=>{await X()});async function X(){v(nt,!0);try{const o=await W.getAchievements();o.status==="success"&&v(st,(o.data||[]).map(i=>({id:i.id,status:i.status,submittedAt:i.submittedAt,verifiedAt:i.verifiedAt,rejectionNote:i.rejectionNote,title:i.data?.title||"",description:i.data?.description||"",category:i.data?.category||"",points:i.data?.points||0,achievement_date:i.data?.achievementDate||i.data?.achievement_date||"",certificate_number:i.data?.certificateNo||i.data?.certificate_number||"",organizer:i.data?.organizer||""})),!0)}catch(o){console.error("Failed to load achievements:",o)}finally{v(nt,!1)}}function _t(){v(P,!1),v(l,{title:"",description:"",category:"",points:0,achievement_date:"",certificate_number:"",organizer:""},!0),v(w,!0)}function mt(o){v(P,!0),v(lt,o,!0);const i=o.achievement_date||o.achievementDate;v(l,{title:o.title||"",description:o.description||"",category:o.category||"",points:o.points||0,achievement_date:i?typeof i=="string"?i.split("T")[0]:new Date(i).toISOString().split("T")[0]:"",certificate_number:o.certificate_number||o.certificateNo||"",organizer:o.organizer||""},!0),v(w,!0)}async function Ct(){try{t(P)&&t(lt)?await W.updateAchievement(t(lt).id,t(l)):await W.createAchievement(t(l)),v(w,!1),await X()}catch(o){console.error("Failed to save achievement:",o),alert("Failed to save achievement")}}async function ft(o){if(confirm("Are you sure you want to delete this achievement?"))try{await W.deleteAchievement(o),await X()}catch(i){console.error("Failed to delete achievement:",i),alert("Failed to delete achievement")}}async function Dt(o){try{await W.submitAchievement(o),await X()}catch(i){console.error("Failed to submit achievement:",i),alert("Failed to submit achievement")}}function St(o){const i={draft:{class:"bg-gray-100 text-gray-700",text:"Draft"},submitted:{class:"bg-yellow-100 text-yellow-700",text:"Submitted"},verified:{class:"bg-green-100 text-green-700",text:"Verified"},rejected:{class:"bg-red-100 text-red-700",text:"Rejected"}};return i[o]||i.draft}var bt=ue(),vt=rt(bt),ct=r(vt),Mt=e(r(ct),2);{var Ft=o=>{var i=ee();i.__click=()=>_t(),u(o,i)};y(Mt,o=>{t(dt)&&o(Ft)})}a(ct);var Nt=e(ct,2);{var Ot=o=>{var i=ae();u(o,i)},qt=o=>{var i=Bt(),R=rt(i);{var $=x=>{var b=ie(),A=e(r(b),6);{var s=g=>{var f=re();f.__click=()=>_t(),u(g,f)};y(A,g=>{t(dt)&&g(s)})}a(b),u(x,b)},B=x=>{var b=ve();Jt(b,21,()=>t(st),Kt,(A,s)=>{const g=it(()=>St(t(s).status));var f=de(),M=r(f),F=r(M),N=r(F),j=r(N),T=r(j,!0);a(j);var k=e(j,2),H=r(k,!0);a(k),a(N);var z=e(N,2),G=r(z,!0);a(z);var C=e(z,2),D=r(C),O=e(r(D),2),Z=r(O,!0);a(O),a(D);var S=e(D,2),I=e(r(S),2),U=r(I,!0);a(I),a(S);var q=e(S,2),V=e(r(q),2),tt=r(V,!0);a(V),a(q);var Y=e(q,2),J=e(r(Y),2),et=r(J,!0);a(J),a(Y),a(C);var K=e(C,2);{var at=d=>{var c=oe(),_=e(r(c),2),h=r(_,!0);a(_),a(c),ot(()=>m(h,t(s).certificate_number)),u(d,c)};y(K,d=>{t(s).certificate_number&&d(at)})}var ut=e(K,2);{var n=d=>{var c=se(),_=r(c),h=e(r(_));a(_),a(c),ot(()=>m(h,` ${(t(s).rejectionNote||t(s).rejection_note)??""}`)),u(d,c)};y(ut,d=>{(t(s).rejectionNote||t(s).rejection_note)&&d(n)})}a(F),a(M);var gt=e(M,2),yt=r(gt);{var Lt=d=>{var c=ne(),_=rt(c);_.__click=()=>Dt(t(s).id);var h=e(_,2);h.__click=()=>mt(t(s));var $t=e(h,2);$t.__click=()=>ft(t(s).id),u(d,c)};y(yt,d=>{t(dt)&&t(s).status==="draft"&&d(Lt)})}var Pt=e(yt,2);{var Rt=d=>{var c=le(),_=rt(c);_.__click=()=>mt(t(s));var h=e(_,2);h.__click=()=>ft(t(s).id),u(d,c)};y(Pt,d=>{t(zt)&&d(Rt)})}a(gt),a(f),ot(d=>{m(T,t(s).title),Qt(k,1,`px-3 py-1 rounded-full text-sm font-medium ${t(g).class??""}`,"svelte-41jfu9"),m(H,t(g).text),m(G,t(s).description),m(Z,t(s).category),m(U,t(s).points),m(tt,d),m(et,t(s).organizer)},[()=>new Date(t(s).achievement_date).toLocaleDateString()]),u(A,f)}),a(b),u(x,b)};y(R,x=>{t(st).length===0?x($):x(B,!1)},!0)}u(o,i)};y(Nt,o=>{t(nt)?o(Ot):o(qt,!1)})}a(vt);var Vt=e(vt,2);{var Et=o=>{var i=ce();i.__click=()=>v(w,!1);var R=r(i);R.__click=n=>n.stopPropagation();var $=r(R),B=r($),x=r(B,!0);a(B);var b=e(B,2);b.__click=()=>v(w,!1),a($);var A=e($,2),s=r(A),g=r(s),f=r(g),M=e(r(f),2);Q(M),a(f);var F=e(f,2),N=e(r(F),2);It(N),a(F);var j=e(F,2),T=e(r(j),2),k=r(T);k.value=k.__value="";var H=e(k);H.value=H.__value="Competition";var z=e(H);z.value=z.__value="Research";var G=e(z);G.value=G.__value="Publication";var C=e(G);C.value=C.__value="Community Service";var D=e(C);D.value=D.__value="Organization";var O=e(D);O.value=O.__value="Certification";var Z=e(O);Z.value=Z.__value="Other",a(T),a(j);var S=e(j,2),I=e(r(S),2);Q(I),a(S);var U=e(S,2),q=e(r(U),2);Q(q),a(U);var V=e(U,2),tt=e(r(V),2);Q(tt),a(V);var Y=e(V,2),J=e(r(Y),2);Q(J),a(Y),a(g),a(s);var et=e(s,2),K=r(et);K.__click=()=>v(w,!1);var at=e(K,2),ut=r(at);a(at),a(et),a(A),a(R),a(i),ot(()=>{m(x,t(P)?"Edit Achievement":"Add New Achievement"),m(ut,`${t(P)?"Update":"Create"} Achievement`)}),Yt("submit",A,n=>(n.preventDefault(),Ct())),L(M,()=>t(l).title,n=>t(l).title=n),L(N,()=>t(l).description,n=>t(l).description=n),Wt(T,()=>t(l).category,n=>t(l).category=n),L(I,()=>t(l).points,n=>t(l).points=n),L(q,()=>t(l).achievement_date,n=>t(l).achievement_date=n),L(tt,()=>t(l).certificate_number,n=>t(l).certificate_number=n),L(J,()=>t(l).organizer,n=>t(l).organizer=n),u(o,i)};y(Vt,o=>{t(w)&&o(Et)})}u(ht,bt),Gt(),kt()}Ut(["click"]);export{ke as component};
