import{f as h,a as u,c as oe}from"../chunks/Cmu9DQIa.js";import{v as Bt,p as pe,b as Z,A as ue,o as me,a as _e,d as a,c as e,s as T,g as s,r as t,f as Lt,n as O,u as z,t as tt,am as Pt}from"../chunks/CziYcT8N.js";import{s as v}from"../chunks/D7KH9V-l.js";import{e as Rt,i as Nt}from"../chunks/CIG3C_FR.js";import{i as et}from"../chunks/CAhqGc99.js";import{a as fe}from"../chunks/BVEhXgIt.js";import{a as kt}from"../chunks/CecYYC_m.js";function x(n,b,r,c){var y=n.__style;if(Bt||y!==b){var w=fe(b);(!Bt||w!==n.getAttribute("style"))&&(w==null?n.removeAttribute("style"):n.style.cssText=w),n.__style=b}return c}var ge=h('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),xe=h('<div><div class="flex justify-between items-center mb-1"><span class="text-sm text-gray-700"> </span> <span class="text-sm font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full"></div></div></div>'),he=h('<div><div class="flex justify-between items-center mb-1"><span class="text-sm text-gray-700"> </span> <span class="text-sm font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-primary-600 h-2 rounded-full"></div></div></div>'),be=h('<div class="card p-6"><h2 class="text-xl font-semibold text-gray-800 mb-4">Monthly Achievement Trends</h2> <div class="space-y-3"></div></div>'),ye=h('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"><div class="card p-6 bg-gradient-to-br from-blue-500 to-blue-600 text-white"><div class="flex items-center justify-between"><div><p class="text-sm opacity-90">Total Achievements</p> <p class="text-3xl font-bold mt-1"> </p></div> <svg class="w-12 h-12 opacity-80" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg></div></div> <div class="card p-6 bg-gradient-to-br from-green-500 to-green-600 text-white"><div class="flex items-center justify-between"><div><p class="text-sm opacity-90">Verified</p> <p class="text-3xl font-bold mt-1"> </p></div> <svg class="w-12 h-12 opacity-80" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div></div> <div class="card p-6 bg-gradient-to-br from-yellow-500 to-yellow-600 text-white"><div class="flex items-center justify-between"><div><p class="text-sm opacity-90">Pending</p> <p class="text-3xl font-bold mt-1"> </p></div> <svg class="w-12 h-12 opacity-80" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg></div></div> <div class="card p-6 bg-gradient-to-br from-purple-500 to-purple-600 text-white"><div class="flex items-center justify-between"><div><p class="text-sm opacity-90">Total Points</p> <p class="text-3xl font-bold mt-1"> </p></div> <svg class="w-12 h-12 opacity-80" fill="currentColor" viewBox="0 0 20 20"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"></path></svg></div></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><div class="card p-6"><h2 class="text-xl font-semibold text-gray-800 mb-4">Status Distribution</h2> <div class="space-y-4"><div><div class="flex justify-between items-center mb-2"><span class="text-gray-700">Draft</span> <span class="font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-gray-600 h-2 rounded-full"></div></div></div> <div><div class="flex justify-between items-center mb-2"><span class="text-gray-700">Submitted</span> <span class="font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full"></div></div></div> <div><div class="flex justify-between items-center mb-2"><span class="text-gray-700">Verified</span> <span class="font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full"></div></div></div> <div><div class="flex justify-between items-center mb-2"><span class="text-gray-700">Rejected</span> <span class="font-semibold text-gray-900"> </span></div> <div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full"></div></div></div></div></div> <div class="card p-6"><h2 class="text-xl font-semibold text-gray-800 mb-4">Category Distribution</h2> <div class="space-y-3"></div></div></div> <div class="card p-6"><h2 class="text-xl font-semibold text-gray-800 mb-4">User Statistics</h2> <div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="text-center p-4 bg-blue-50 rounded-lg"><p class="text-sm text-gray-600 mb-1">Mahasiswa</p> <p class="text-3xl font-bold text-blue-600"> </p></div> <div class="text-center p-4 bg-purple-50 rounded-lg"><p class="text-sm text-gray-600 mb-1">Dosen Wali</p> <p class="text-3xl font-bold text-purple-600"> </p></div> <div class="text-center p-4 bg-indigo-50 rounded-lg"><p class="text-sm text-gray-600 mb-1">Admin</p> <p class="text-3xl font-bold text-indigo-600"> </p></div></div></div> <!>',1),we=h('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-800">Statistics & Reports</h1> <p class="text-gray-600 mt-1">Comprehensive overview of achievements and performance</p></div> <!></div>');function Ce(n,b){pe(b,!0);let r=Z(null),c=Z(ue([])),y=Z(!0);me(async()=>{await w()});async function w(){T(y,!0);try{const[i,d]=await Promise.all([kt.getStatistics(),kt.getAchievements()]);i.status==="success"&&T(r,i.data,!0),d.status==="success"&&T(c,(d.data||[]).map(l=>({status:l.status,category:l.data?.category||"",points:l.data?.points||0,achievement_date:l.data?.achievementDate||l.data?.achievement_date||""})),!0)}catch(i){console.error("Failed to load data:",i)}finally{T(y,!1)}}let Ht=z(()=>s(c).reduce((i,d)=>{const l=d.category||"Other";return i[l]=(i[l]||0)+1,i},{})),Ut=z(()=>s(c).filter(i=>i.status==="verified").reduce((i,d)=>i+(d.points||0),0)),V=z(()=>s(c).reduce((i,d)=>{if(d.achievement_date){const l=new Date(d.achievement_date).toLocaleDateString("en-US",{year:"numeric",month:"short"});i[l]=(i[l]||0)+1}return i},{}));var B=we(),Ft=a(e(B),2);{var Wt=i=>{var d=ge();u(i,d)},qt=i=>{var d=oe(),l=Lt(d);{var Et=L=>{var at=ye(),P=Lt(at),R=e(P),st=e(R),it=e(st),rt=a(e(it),2),Gt=e(rt,!0);t(rt),t(it),O(2),t(st),t(R);var N=a(R,2),vt=e(N),dt=e(vt),lt=a(e(dt),2),It=e(lt,!0);t(lt),t(dt),O(2),t(vt),t(N);var k=a(N,2),nt=e(k),ct=e(nt),ot=a(e(ct),2),Jt=e(ot,!0);t(ot),t(ct),O(2),t(nt),t(k);var pt=a(k,2),ut=e(pt),mt=e(ut),_t=a(e(mt),2),Kt=e(_t,!0);t(_t),t(mt),O(2),t(ut),t(pt),t(P);var H=a(P,2),U=e(H),ft=a(e(U),2),F=e(ft),W=e(F),gt=a(e(W),2),Qt=e(gt,!0);t(gt),t(W);var xt=a(W,2),Xt=e(xt);t(xt),t(F);var q=a(F,2),E=e(q),ht=a(e(E),2),Yt=e(ht,!0);t(ht),t(E);var bt=a(E,2),Zt=e(bt);t(bt),t(q);var G=a(q,2),I=e(G),yt=a(e(I),2),te=e(yt,!0);t(yt),t(I);var wt=a(I,2),ee=e(wt);t(wt),t(G);var jt=a(G,2),J=e(jt),Dt=a(e(J),2),ae=e(Dt,!0);t(Dt),t(J);var Mt=a(J,2),se=e(Mt);t(Mt),t(jt),t(ft),t(U);var St=a(U,2),$t=a(e(St),2);Rt($t,21,()=>Object.entries(s(Ht)).sort((o,p)=>p[1]-o[1]),Nt,(o,p)=>{var j=z(()=>Pt(s(p),2));let D=()=>s(j)[0],m=()=>s(j)[1];var _=xe(),M=e(_),f=e(M),S=e(f,!0);t(f);var g=a(f,2),$=e(g,!0);t(g),t(M);var A=a(M,2),C=e(A);t(A),t(_),tt(Y=>{v(S,D()),v($,m()),x(C,`width: ${Y??""}%`)},[()=>Number(m())/s(c).length*100]),u(o,_)}),t($t),t(St),t(H);var K=a(H,2),zt=a(e(K),2),Q=e(zt),At=a(e(Q),2),ie=e(At,!0);t(At),t(Q);var X=a(Q,2),Ct=a(e(X),2),re=e(Ct,!0);t(Ct),t(X);var Tt=a(X,2),Ot=a(e(Tt),2),ve=e(Ot,!0);t(Ot),t(Tt),t(zt),t(K);var de=a(K,2);{var le=o=>{var p=be(),j=a(e(p),2);Rt(j,21,()=>Object.entries(s(V)).sort((D,m)=>new Date(D[0]).getTime()-new Date(m[0]).getTime()).slice(-6),Nt,(D,m)=>{var _=z(()=>Pt(s(m),2));let M=()=>s(_)[0],f=()=>s(_)[1];var S=he(),g=e(S),$=e(g),A=e($,!0);t($);var C=a($,2),Y=e(C);t(C),t(g);var Vt=a(g,2),ne=e(Vt);t(Vt),t(S),tt(ce=>{v(A,M()),v(Y,`${f()??""} achievements`),x(ne,`width: ${ce??""}%`)},[()=>Number(f())/Math.max(...Object.values(s(V)).map(Number))*100]),u(D,S)}),t(j),t(p),u(o,p)};et(de,o=>{Object.keys(s(V)).length>0&&o(le)})}tt(()=>{v(Gt,s(r).total_achievements||0),v(It,s(r).verified_achievements||0),v(Jt,s(r).pending_verifications||0),v(Kt,s(Ut)),v(Qt,s(r).draft_achievements||0),x(Xt,`width: ${s(r).draft_achievements/s(r).total_achievements*100||0}%`),v(Yt,s(r).pending_verifications||0),x(Zt,`width: ${s(r).pending_verifications/s(r).total_achievements*100||0}%`),v(te,s(r).verified_achievements||0),x(ee,`width: ${s(r).verified_achievements/s(r).total_achievements*100||0}%`),v(ae,s(r).rejected_achievements||0),x(se,`width: ${s(r).rejected_achievements/s(r).total_achievements*100||0}%`),v(ie,s(r).students_count||0),v(re,s(r).lecturers_count||0),v(ve,s(r).admins_count||0)}),u(L,at)};et(l,L=>{s(r)&&L(Et)},!0)}u(i,d)};et(Ft,i=>{s(y)?i(Wt):i(qt,!1)})}t(B),u(n,B),_e()}export{Ce as component};
