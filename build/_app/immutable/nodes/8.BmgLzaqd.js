import{f as u,a as c,c as Bt}from"../chunks/Cmu9DQIa.js";import{p as Vt,b as F,A as Ft,o as St,f as ht,a as It,d as e,c as a,s as o,g as r,r as t,t as w,al as Ot,n as wt}from"../chunks/CziYcT8N.js";import{d as $t,s as d,e as qt}from"../chunks/D7KH9V-l.js";import{e as Et,i as Ht}from"../chunks/CIG3C_FR.js";import{i as b}from"../chunks/CAhqGc99.js";import{b as Tt}from"../chunks/Do9sIj_i.js";import{s as Gt}from"../chunks/BmnBliu1.js";import{a as ft}from"../chunks/CecYYC_m.js";import"../chunks/CcZuglA2.js";var Jt=u('<div class="flex justify-center items-center py-12"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"></div></div>'),Kt=u('<div class="card p-12 text-center"><svg class="w-16 h-16 mx-auto text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <h3 class="text-lg font-medium text-gray-900 mb-2">No pending verifications</h3> <p class="text-gray-600">All achievements have been reviewed</p></div>'),Qt=u('<span class="text-gray-500"> </span>'),Ut=u('<div class="mb-3 flex items-center gap-2 text-sm text-gray-600"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path></svg> <span> <!></span></div>'),Wt=u('<div class="mt-2 text-sm"><span class="text-gray-500">Certificate:</span> <span class="font-medium text-gray-800 ml-1"> </span></div>'),Xt=u('<div class="card p-6 hover:shadow-lg transition-shadow"><div class="flex justify-between items-start"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><h3 class="text-xl font-semibold text-gray-800"> </h3> <span class="px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium">Pending Review</span></div> <!> <p class="text-gray-600 mb-3"> </p> <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"><div><span class="text-gray-500">Category:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Points:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Date:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <div><span class="text-gray-500">Organizer:</span> <span class="font-medium text-gray-800 ml-1"> </span></div></div> <!></div></div> <div class="flex gap-2 mt-4"><button class="btn btn-secondary btn-sm"><svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path><path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path></svg> View Details</button> <button class="btn btn-sm bg-green-600 hover:bg-green-700 text-white"><svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg> Verify</button> <button class="btn btn-sm bg-red-600 hover:bg-red-700 text-white"><svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg> Reject</button></div></div>'),Yt=u('<div class="grid grid-cols-1 gap-6"></div>'),Zt=u('<div><span class="text-gray-600">NIM:</span> <span class="font-medium text-gray-800 ml-1"> </span></div>'),ta=u('<div><span class="text-gray-600">Major:</span> <span class="font-medium text-gray-800 ml-1"> </span></div>'),aa=u('<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg"><h3 class="font-semibold text-gray-800 mb-2">Student Information</h3> <div class="grid grid-cols-2 gap-3 text-sm"><div><span class="text-gray-600">Name:</span> <span class="font-medium text-gray-800 ml-1"> </span></div> <!> <!></div></div>'),ea=u('<div><label class="text-sm text-gray-600">Certificate Number</label> <p class="font-medium text-gray-800"> </p></div>'),ra=u('<div class="modal-overlay svelte-iypicw"><div class="modal-content svelte-iypicw"><div class="modal-header svelte-iypicw"><h2 class="text-2xl font-bold text-gray-800">Achievement Details</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <div class="modal-body svelte-iypicw"><div class="space-y-4"><!> <div><h3 class="font-semibold text-gray-800 mb-2">Achievement Information</h3> <div class="space-y-3"><div><label class="text-sm text-gray-600">Title</label> <p class="font-medium text-gray-800"> </p></div> <div><label class="text-sm text-gray-600">Description</label> <p class="text-gray-800"> </p></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-sm text-gray-600">Category</label> <p class="font-medium text-gray-800"> </p></div> <div><label class="text-sm text-gray-600">Points</label> <p class="font-medium text-gray-800"> </p></div></div> <div class="grid grid-cols-2 gap-4"><div><label class="text-sm text-gray-600">Date</label> <p class="font-medium text-gray-800"> </p></div> <div><label class="text-sm text-gray-600">Organizer</label> <p class="font-medium text-gray-800"> </p></div></div> <!></div></div></div></div> <div class="modal-footer svelte-iypicw"><button class="btn btn-secondary">Close</button> <button class="btn bg-red-600 hover:bg-red-700 text-white">Reject</button> <button class="btn bg-green-600 hover:bg-green-700 text-white">Verify</button></div></div></div>'),sa=u('<div class="modal-overlay svelte-iypicw"><div class="modal-content max-w-md svelte-iypicw"><div class="modal-header svelte-iypicw"><h2 class="text-2xl font-bold text-gray-800">Reject Achievement</h2> <button class="text-gray-400 hover:text-gray-600"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <form><div class="modal-body svelte-iypicw"><p class="text-gray-600 mb-4">Please provide a reason for rejecting this achievement:</p> <textarea class="form-input" rows="4" placeholder="Explain why this achievement is being rejected..." required></textarea></div> <div class="modal-footer svelte-iypicw"><button type="button" class="btn btn-secondary">Cancel</button> <button type="submit" class="btn bg-red-600 hover:bg-red-700 text-white">Reject Achievement</button></div></form></div></div>'),ia=u('<div class="space-y-6"><div><h1 class="text-3xl font-bold text-gray-800">Verification</h1> <p class="text-gray-600 mt-1">Review and verify student achievements</p></div> <!></div> <!> <!>',1);function fa(jt,kt){Vt(kt,!0);const[la,zt]=Gt();let lt=F(Ft([])),vt=F(!0),k=F(!1),D=F(!1),l=F(null),S=F("");St(async()=>{await dt()});async function dt(){o(vt,!0);try{const i=await ft.getPendingVerifications();i.status==="success"&&o(lt,(i.data||[]).map(s=>({id:s.id,status:s.status,submittedAt:s.submittedAt,student:s.student,title:s.data?.title||"",description:s.data?.description||"",category:s.data?.category||"",points:s.data?.points||0,achievement_date:s.data?.achievementDate||s.data?.achievement_date||"",certificate_number:s.data?.certificateNo||s.data?.certificate_number||"",organizer:s.data?.organizer||""})),!0)}catch(i){console.error("Failed to load pending verifications:",i)}finally{o(vt,!1)}}function Mt(i){o(l,i,!0),o(k,!0)}function gt(i){o(l,i,!0),o(S,""),o(D,!0)}async function xt(i){if(confirm("Are you sure you want to verify this achievement?"))try{await ft.verifyAchievement(i),o(k,!1),await dt()}catch(s){console.error("Failed to verify achievement:",s),alert("Failed to verify achievement")}}async function Lt(){if(!r(S).trim()){alert("Please provide a reason for rejection");return}try{r(l)&&(await ft.rejectAchievement(r(l).id,r(S)),o(D,!1),o(k,!1),await dt())}catch(i){console.error("Failed to reject achievement:",i),alert("Failed to reject achievement")}}var bt=ia(),ot=ht(bt),At=e(a(ot),2);{var Ct=i=>{var s=Jt();c(i,s)},Dt=i=>{var s=Bt(),y=ht(s);{var h=p=>{var f=Kt();c(p,f)},I=p=>{var f=Yt();Et(f,21,()=>r(lt),Ht,(z,v)=>{var j=Xt(),g=a(j),P=a(g),R=a(P),Y=a(R),O=a(Y,!0);t(Y),wt(2),t(R);var $=e(R,2);{var nt=n=>{var m=Ut(),x=e(a(m),2),L=a(x),ut=e(L);{var it=U=>{var W=Qt(),_t=a(W);t(W),w(()=>d(_t,`(${r(v).student.nim??""})`)),c(U,W)};b(ut,U=>{r(v).student.nim&&U(it)})}t(x),t(m),w(()=>d(L,`${(r(v).student.full_name||r(v).student.user?.full_name||"N/A")??""} `)),c(n,m)};b($,n=>{r(v).student&&n(nt)})}var M=e($,2),q=a(M,!0);t(M);var N=e(M,2),E=a(N),H=e(a(E),2),Z=a(H,!0);t(H),t(E);var T=e(E,2),B=e(a(T),2),G=a(B,!0);t(B),t(T);var V=e(T,2),tt=e(a(V),2),at=a(tt,!0);t(tt),t(V);var J=e(V,2),et=e(a(J),2),ct=a(et,!0);t(et),t(J),t(N);var pt=e(N,2);{var rt=n=>{var m=Wt(),x=e(a(m),2),L=a(x,!0);t(x),t(m),w(()=>d(L,r(v).certificate_number)),c(n,m)};b(pt,n=>{r(v).certificate_number&&n(rt)})}t(P),t(g);var K=e(g,2),Q=a(K);Q.__click=()=>Mt(r(v));var st=e(Q,2);st.__click=()=>xt(r(v).id);var _=e(st,2);_.__click=()=>gt(r(v)),t(K),t(j),w(n=>{d(O,r(v).title),d(q,r(v).description),d(Z,r(v).category),d(G,r(v).points),d(at,n),d(ct,r(v).organizer)},[()=>new Date(r(v).achievement_date).toLocaleDateString()]),c(z,j)}),t(f),c(p,f)};b(y,p=>{r(lt).length===0?p(h):p(I,!1)},!0)}c(i,s)};b(At,i=>{r(vt)?i(Ct):i(Dt,!1)})}t(ot);var yt=e(ot,2);{var Pt=i=>{var s=ra();s.__click=()=>o(k,!1);var y=a(s);y.__click=_=>_.stopPropagation();var h=a(y),I=e(a(h),2);I.__click=()=>o(k,!1),t(h);var p=e(h,2),f=a(p),z=a(f);{var v=_=>{var n=aa(),m=e(a(n),2),x=a(m),L=e(a(x),2),ut=a(L,!0);t(L),t(x);var it=e(x,2);{var U=A=>{var C=Zt(),X=e(a(C),2),mt=a(X,!0);t(X),t(C),w(()=>d(mt,r(l).student.nim)),c(A,C)};b(it,A=>{r(l).student.nim&&A(U)})}var W=e(it,2);{var _t=A=>{var C=ta(),X=e(a(C),2),mt=a(X,!0);t(X),t(C),w(()=>d(mt,r(l).student.major)),c(A,C)};b(W,A=>{r(l).student.major&&A(_t)})}t(m),t(n),w(()=>d(ut,r(l).student.full_name||r(l).student.user?.full_name||"N/A")),c(_,n)};b(z,_=>{r(l).student&&_(v)})}var j=e(z,2),g=e(a(j),2),P=a(g),R=e(a(P),2),Y=a(R,!0);t(R),t(P);var O=e(P,2),$=e(a(O),2),nt=a($,!0);t($),t(O);var M=e(O,2),q=a(M),N=e(a(q),2),E=a(N,!0);t(N),t(q);var H=e(q,2),Z=e(a(H),2),T=a(Z,!0);t(Z),t(H),t(M);var B=e(M,2),G=a(B),V=e(a(G),2),tt=a(V,!0);t(V),t(G);var at=e(G,2),J=e(a(at),2),et=a(J,!0);t(J),t(at),t(B);var ct=e(B,2);{var pt=_=>{var n=ea(),m=e(a(n),2),x=a(m,!0);t(m),t(n),w(()=>d(x,r(l).certificate_number)),c(_,n)};b(ct,_=>{r(l).certificate_number&&_(pt)})}t(g),t(j),t(f),t(p);var rt=e(p,2),K=a(rt);K.__click=()=>o(k,!1);var Q=e(K,2);Q.__click=()=>gt(r(l));var st=e(Q,2);st.__click=()=>xt(r(l).id),t(rt),t(y),t(s),w(_=>{d(Y,r(l).title),d(nt,r(l).description),d(E,r(l).category),d(T,r(l).points),d(tt,_),d(et,r(l).organizer)},[()=>new Date(r(l).achievement_date).toLocaleDateString()]),c(i,s)};b(yt,i=>{r(k)&&r(l)&&i(Pt)})}var Rt=e(yt,2);{var Nt=i=>{var s=sa();s.__click=()=>o(D,!1);var y=a(s);y.__click=g=>g.stopPropagation();var h=a(y),I=e(a(h),2);I.__click=()=>o(D,!1),t(h);var p=e(h,2),f=a(p),z=e(a(f),2);Ot(z),t(f);var v=e(f,2),j=a(v);j.__click=()=>o(D,!1),wt(2),t(v),t(p),t(y),t(s),qt("submit",p,g=>(g.preventDefault(),Lt())),Tt(z,()=>r(S),g=>o(S,g)),c(i,s)};b(Rt,i=>{r(D)&&r(l)&&i(Nt)})}c(jt,bt),It(),zt()}$t(["click"]);export{fa as component};
