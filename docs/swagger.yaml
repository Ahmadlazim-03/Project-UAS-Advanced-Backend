basePath: /api/v1
definitions:
  service.AssignAdvisorRequest:
    properties:
      advisor_id:
        type: string
    required:
    - advisor_id
    type: object
  service.AssignRoleRequest:
    properties:
      role_id:
        type: string
    required:
    - role_id
    type: object
  service.CreateAchievementRequest:
    properties:
      achieved_date:
        type: string
      attachments:
        items:
          type: string
        type: array
      data:
        additionalProperties: true
        type: object
      description:
        type: string
      reference_id:
        type: string
      title:
        type: string
    required:
    - achieved_date
    - title
    type: object
  service.CreateUserRequest:
    properties:
      academic_year:
        type: string
      department:
        type: string
      email:
        type: string
      full_name:
        type: string
      lecturer_id:
        type: string
      password:
        minLength: 6
        type: string
      program_study:
        type: string
      role_id:
        type: string
      student_id:
        type: string
      username:
        type: string
    required:
    - email
    - full_name
    - password
    - username
    type: object
  service.LoginRequest:
    properties:
      password:
        type: string
      username:
        type: string
    required:
    - password
    - username
    type: object
  service.RefreshTokenRequest:
    properties:
      refresh_token:
        type: string
    required:
    - refresh_token
    type: object
  service.RejectRequest:
    properties:
      reason:
        type: string
    required:
    - reason
    type: object
  service.UpdateAchievementRequest:
    properties:
      achieved_date:
        type: string
      attachments:
        items:
          type: string
        type: array
      data:
        additionalProperties: true
        type: object
      description:
        type: string
      title:
        type: string
    type: object
  service.UpdateUserRequest:
    properties:
      email:
        type: string
      full_name:
        type: string
      is_active:
        type: boolean
    type: object
  service.VerifyRequest:
    properties:
      comments:
        type: string
    type: object
host: localhost:3000
info:
  contact:
    email: support@example.com
    name: API Support
  description: API for managing student achievements with RBAC
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  termsOfService: http://swagger.io/terms/
  title: Student Achievement Management System API
  version: "1.0"
paths:
  /achievements:
    get:
      consumes:
      - application/json
      description: Get paginated list of achievements with optional status filter
      parameters:
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 10, max 100)
        in: query
        name: limit
        type: integer
      - description: Filter by status (pending/approved/rejected)
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of achievements with pagination
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List all achievements
      tags:
      - Achievements
    post:
      consumes:
      - application/json
      description: 'Create a new achievement record (dual-database: PostgreSQL + MongoDB)'
      parameters:
      - description: Achievement creation data
        in: body
        name: achievement
        required: true
        schema:
          $ref: '#/definitions/service.CreateAchievementRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Achievement created successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid input or validation error
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Create new achievement
      tags:
      - Achievements
  /achievements/{id}:
    delete:
      consumes:
      - application/json
      description: Delete achievement by ID (soft delete)
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Achievement deleted successfully
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Delete achievement
      tags:
      - Achievements
    get:
      consumes:
      - application/json
      description: Get detailed information of a specific achievement
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Achievement details
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Achievement not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get achievement by ID
      tags:
      - Achievements
    put:
      consumes:
      - application/json
      description: Update achievement information by ID
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      - description: Achievement update data
        in: body
        name: achievement
        required: true
        schema:
          $ref: '#/definitions/service.UpdateAchievementRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Achievement updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid achievement ID or input
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Achievement not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update achievement
      tags:
      - Achievements
  /achievements/{id}/reject:
    post:
      consumes:
      - application/json
      description: Advisor rejects an achievement with reason (only for own advisees)
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      - description: Rejection reason
        in: body
        name: reject
        required: true
        schema:
          $ref: '#/definitions/service.RejectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Achievement rejected successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Achievement not submitted or already verified
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden - not student's advisor
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Achievement not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Reject achievement
      tags:
      - Verification
  /achievements/{id}/submit:
    post:
      consumes:
      - application/json
      description: Submit an achievement to advisor for verification
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Achievement submitted for verification
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Achievement already verified/rejected
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Achievement not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Submit achievement for verification
      tags:
      - Verification
  /achievements/{id}/verify:
    post:
      consumes:
      - application/json
      description: Advisor verifies an achievement (only for own advisees)
      parameters:
      - description: Achievement ID (MongoDB ObjectID)
        in: path
        name: id
        required: true
        type: string
      - description: Verification comments
        in: body
        name: verify
        schema:
          $ref: '#/definitions/service.VerifyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Achievement verified successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Achievement not submitted or already verified
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden - not student's advisor
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Achievement not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Verify achievement
      tags:
      - Verification
  /advisee-achievements:
    get:
      consumes:
      - application/json
      description: Get all achievements from students under advisor's supervision
      produces:
      - application/json
      responses:
        "200":
          description: Advisee achievements retrieved
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden - not a lecturer
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get advisee achievements
      tags:
      - Verification
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticate user with username/email and password
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful with access and refresh tokens
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request body or validation failed
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid credentials
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Account is inactive
          schema:
            additionalProperties: true
            type: object
      summary: User login
      tags:
      - Authentication
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Logout authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Logged out successfully
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Logout user
      tags:
      - Authentication
  /auth/profile:
    get:
      consumes:
      - application/json
      description: Get authenticated user's profile information
      produces:
      - application/json
      responses:
        "200":
          description: User profile retrieved
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - Authentication
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Generate new access token using refresh token
      parameters:
      - description: Refresh token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: New access token generated
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid request body
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid or expired refresh token
          schema:
            additionalProperties: true
            type: object
      summary: Refresh access token
      tags:
      - Authentication
  /lecturers:
    get:
      consumes:
      - application/json
      description: Get paginated list of lecturers with their department information
      parameters:
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of lecturers with pagination
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List all lecturers
      tags:
      - Lecturers
  /lecturers/{id}/advisees:
    get:
      consumes:
      - application/json
      description: Get all students advised by a specific lecturer
      parameters:
      - description: Lecturer ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of advisees
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid lecturer ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Lecturer not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get lecturer's advisees
      tags:
      - Lecturers
  /reports/statistics:
    get:
      consumes:
      - application/json
      description: Get overall statistics (achievements by type, total students, total
        lecturers)
      produces:
      - application/json
      responses:
        "200":
          description: Statistics retrieved successfully
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get system statistics
      tags:
      - Reports
  /reports/students/{id}:
    get:
      consumes:
      - application/json
      description: Get achievement report for a specific student
      parameters:
      - description: Student ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Student report retrieved successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid student ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Student not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get student report
      tags:
      - Reports
  /students:
    get:
      consumes:
      - application/json
      description: Get paginated list of students with their academic information
      parameters:
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of students with pagination
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List all students
      tags:
      - Students
  /students/{id}:
    get:
      consumes:
      - application/json
      description: Get detailed information of a specific student
      parameters:
      - description: Student ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Student details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid student ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Student not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get student by ID
      tags:
      - Students
  /students/{id}/achievements:
    get:
      consumes:
      - application/json
      description: Get all achievements of a specific student
      parameters:
      - description: Student ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Student achievements
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid student ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Student not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get student achievements
      tags:
      - Students
  /students/{id}/assign-advisor:
    post:
      consumes:
      - application/json
      description: Assign a lecturer as advisor to a student
      parameters:
      - description: Student ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Advisor assignment data
        in: body
        name: advisor
        required: true
        schema:
          $ref: '#/definitions/service.AssignAdvisorRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Advisor assigned successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid student ID or advisor ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: Student or advisor not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Assign advisor to student
      tags:
      - Students
  /users:
    get:
      consumes:
      - application/json
      description: Get paginated list of users with role information
      parameters:
      - description: Page number (default 1)
        in: query
        name: page
        type: integer
      - description: Items per page (default 10, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of users with pagination
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - User Management
    post:
      consumes:
      - application/json
      description: Create a new user with role assignment (Mahasiswa/Dosen Wali/Admin)
      parameters:
      - description: User creation data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/service.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User created successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid input or validation error
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "409":
          description: Username or email already exists
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Create new user
      tags:
      - User Management
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: Delete user by ID
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User deleted successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid user ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - User Management
    get:
      consumes:
      - application/json
      description: Get detailed information of a specific user
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User details
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid user ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - User Management
    put:
      consumes:
      - application/json
      description: Update user information by ID
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: User update data
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/service.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User updated successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid user ID or input
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Update user
      tags:
      - User Management
  /users/{id}/assign-role:
    post:
      consumes:
      - application/json
      description: Assign a role to user by user ID and role ID
      parameters:
      - description: User ID (UUID)
        in: path
        name: id
        required: true
        type: string
      - description: Role assignment data
        in: body
        name: role
        required: true
        schema:
          $ref: '#/definitions/service.AssignRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Role assigned successfully
          schema:
            additionalProperties: true
            type: object
        "400":
          description: Invalid user ID or role ID
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Unauthorized
          schema:
            additionalProperties: true
            type: object
        "403":
          description: Forbidden
          schema:
            additionalProperties: true
            type: object
        "404":
          description: User not found
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Assign role to user
      tags:
      - User Management
schemes:
- http
- https
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
